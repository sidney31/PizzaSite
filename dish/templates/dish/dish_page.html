{% extends 'base.html' %}
{% load static wagtailimages_tags cart_tags %}

{% block static %}
    <link rel="stylesheet" href="{% static '/css/dish_page.css' %}">
{% endblock %}

{% block content %}
    <button onclick="
            if (window.history.length > 1)
            window.history.back();
            else
            document.location.href='{% url 'menu' %}';
            " id="backToMenu"
            class="bold btn d-flex align-items-center text-decoration-none gap-3">
        <i class="bi bi-arrow-return-left"></i>
    </button>
    <div class="wrapper row">
        <div class="col-lg-12 col-xl-6">
            {% image dish.image original as image %}
            <div class="square-image mb-md-5">
                {% if image %}
                    <img src="{{ image.url }}" alt="{{ dish.name }}">
                {% else %}
                    <p class="text-center bold position-relative top-50 translate-middle-y m-0">
                        Изображение отсутствует
                    </p>
                {% endif %}
            </div>
        </div>
        <div class="col-lg-12 col-xl-6">
            <p class="bold fs-1">
                {{ dish.name }}
            </p>
            <p class="fs-4 me-md-4">
                {{ dish.description }}
            </p>
            <p class="bold fs-2">
                {{ dish.price }} ₽
            </p>

            {% get_quantity dish.id as quantity %}
            {% if quantity.quantity > 0 %}
                <p class="bold">
                    <a href="{% url 'cart:cart_remove' dish.id 1 %}" class="btn">
                        <i class="bi bi-dash-lg"></i>
                    </a>
                    {{ quantity.quantity }}
                    <a href="{% url 'cart:cart_add' dish.id %}" class="btn">
                        <i class="bi bi-plus-lg"></i>
                    </a>
                </p>
            {% else %}
                <a href="{% url 'cart:cart_add' dish.id %}"
                   class="btn btn-buy">Добавить</a>
            {% endif %}
        </div>
    </div>
{% endblock %}